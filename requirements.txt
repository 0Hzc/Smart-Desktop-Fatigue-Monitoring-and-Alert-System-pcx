# ============================================
# 智能桌面疲劳监测系统 - 依赖库清单
# Python 3.8+ 推荐 (Ubuntu 20.04+)
# ============================================

# ============================================
# Python包依赖
# ============================================

# 计算机视觉核心库
opencv-python==4.8.1.78
mediapipe==0.10.8
numpy==1.24.3

# Web框架（用于局域网Web界面）
Flask==3.0.0
Flask-SocketIO==5.3.5
python-socketio==5.10.0
python-engineio==4.8.0

# 语音播报（pyttsx3在Linux需要espeak系统依赖）
pyttsx3==2.90

# 配置文件解析
PyYAML==6.0.1

# 数据处理
scipy==1.11.4

# ============================================
# 可选依赖（树莓派）
# ============================================

# 树莓派摄像头 (如果在树莓派上运行，取消注释)
# picamera2==0.3.12

# GPIO控制 (仅树莓派需要，Ubuntu开发环境不需要)
# RPi.GPIO==0.7.1

# ============================================
# 开发工具 (可选)
# ============================================

# pytest==7.4.3
# black==23.12.1
# flake8==6.1.0

# ============================================
# Ubuntu/Linux系统依赖安装说明
# ============================================
#
# 在安装Python包之前，必须先安装以下系统级依赖：
#
# 1. 更新软件源
#    sudo apt-get update
#
# 2. 安装编译工具链（必需）
#    sudo apt-get install -y build-essential
#    sudo apt-get install -y python3-dev python3-pip
#    sudo apt-get install -y cmake pkg-config
#
# 3. 安装OpenCV系统依赖（必需）
#    sudo apt-get install -y libgl1-mesa-glx libglib2.0-0
#    sudo apt-get install -y libsm6 libxext6 libxrender-dev
#    sudo apt-get install -y libgomp1 libgtk-3-0
#
# 4. 安装摄像头支持（必需）
#    sudo apt-get install -y v4l-utils libv4l-dev
#
# 5. 安装音频系统（语音播报功能需要）
#    sudo apt-get install -y espeak espeak-data libespeak-dev
#    sudo apt-get install -y libportaudio2 portaudio19-dev
#    sudo apt-get install -y alsa-utils pulseaudio
#
# 6. 安装科学计算库依赖（scipy需要）
#    sudo apt-get install -y libatlas-base-dev
#    sudo apt-get install -y libhdf5-dev
#
# 7. 清理
#    sudo apt-get autoremove -y
#    sudo apt-get autoclean
#
# ============================================
# 一键安装脚本（推荐）
# ============================================
#
# 将以下内容保存为 install_ubuntu_deps.sh 并执行：
#
# #!/bin/bash
# echo "正在安装Ubuntu系统依赖..."
# sudo apt-get update
# sudo apt-get install -y build-essential python3-dev python3-pip cmake pkg-config
# sudo apt-get install -y libgl1-mesa-glx libglib2.0-0 libsm6 libxext6 libxrender-dev libgomp1 libgtk-3-0
# sudo apt-get install -y v4l-utils libv4l-dev
# sudo apt-get install -y espeak espeak-data libespeak-dev libportaudio2 portaudio19-dev alsa-utils pulseaudio
# sudo apt-get install -y libatlas-base-dev libhdf5-dev
# sudo apt-get autoremove -y && sudo apt-get autoclean
# echo "系统依赖安装完成！"
#
# 执行方法：
# chmod +x install_ubuntu_deps.sh
# ./install_ubuntu_deps.sh
#
# ============================================
# Python包安装方法
# ============================================
#
# 1. 创建虚拟环境（推荐）
#    python3 -m venv venv
#    source venv/bin/activate
#
# 2. 升级pip
#    pip install --upgrade pip
#
# 3. 安装依赖
#    pip install -r requirements.txt
#
# 4. 验证安装
#    python -c "import cv2; import mediapipe; import flask; print('所有依赖安装成功！')"
#
# ============================================
# 常见问题排查
# ============================================
#
# 问题1：ImportError: libGL.so.1: cannot open shared object file
# 解决：sudo apt-get install -y libgl1-mesa-glx
#
# 问题2：摄像头无法打开
# 解决：sudo apt-get install -y v4l-utils
#       ls /dev/video*  # 检查摄像头设备
#       sudo usermod -a -G video $USER  # 添加用户到video组
#
# 问题3：pyttsx3语音播报无声音
# 解决：sudo apt-get install -y espeak alsa-utils
#       speaker-test -c 2  # 测试音频输出
#
# 问题4：mediapipe导入失败
# 解决：检查glibc版本：ldd --version
#       需要glibc 2.31+，建议使用Ubuntu 20.04+
#
# 问题5：Flask Web界面无法访问
# 解决：检查防火墙：sudo ufw allow 5000
#       或临时关闭：sudo ufw disable
#
# ============================================
# 树莓派特殊说明
# ============================================
#
# 树莓派4B在树莓派OS上运行时：
# 1. 使用32位或64位树莓派OS（Bullseye或更新版本）
# 2. 摄像头配置：sudo raspi-config -> Interface Options -> Camera
# 3. GPIO权限：sudo usermod -a -G gpio $USER
# 4. 启用I2C/SPI（如果使用传感器）：sudo raspi-config -> Interface Options
#
# ============================================
